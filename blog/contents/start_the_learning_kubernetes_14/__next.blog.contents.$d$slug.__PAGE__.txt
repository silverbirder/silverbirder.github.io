1:"$Sreact.fragment"
2:I[36926,["/_next/static/chunks/5af7d63d3817c0ad.js","/_next/static/chunks/2135796b958376e0.js","/_next/static/chunks/f06f97cc5d67ef22.js"],"PostArticle"]
6:I[85089,["/_next/static/chunks/ac58007543a7ba41.js","/_next/static/chunks/10f1e981bebff83b.js"],"OutletBoundary"]
7:"$Sreact.suspense"
3:T2d833,"use strict";
const {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];
const {useMDXComponents: _provideComponents} = arguments[0];
function _createMdxContent(props) {
  const _components = {
    a: "a",
    code: "code",
    figure: "figure",
    h2: "h2",
    li: "li",
    ol: "ol",
    p: "p",
    pre: "pre",
    span: "span",
    ul: "ul",
    ..._provideComponents(),
    ...props.components
  };
  return _jsxs(_Fragment, {
    children: [_jsx(_components.h2, {
      id: "ストーリー",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#ストーリー",
        children: "ストーリー"
      })
    }), "\n", _jsxs(_components.ol, {
      children: ["\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_01/",
          children: "一足遅れて Kubernetes を学び始める - 01. 環境選択編 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_02/",
          children: "一足遅れて Kubernetes を学び始める - 02. Docker For Mac -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_03/",
          children: "一足遅れて Kubernetes を学び始める - 03. Raspberry Pi -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_04/",
          children: "一足遅れて Kubernetes を学び始める - 04. kubectl -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_05/",
          children: "一足遅れて Kubernetes を学び始める - 05. workloads その 1 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_06/",
          children: "一足遅れて Kubernetes を学び始める - 06. workloads その 2 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_07/",
          children: "一足遅れて Kubernetes を学び始める - 07. workloads その 3 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_08/",
          children: "一足遅れて Kubernetes を学び始める - 08. discovery&LB その 1 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_09/",
          children: "一足遅れて Kubernetes を学び始める - 09. discovery&LB その 2 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_10/",
          children: "一足遅れて Kubernetes を学び始める - 10. config&storage その 1 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_11/",
          children: "一足遅れて Kubernetes を学び始める - 11. config&storage その 2 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_12/",
          children: "一足遅れて Kubernetes を学び始める - 12. リソース制限 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_13/",
          children: "一足遅れて Kubernetes を学び始める - 13. ヘルスチェックとコンテナライフサイクル -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_14/",
          children: "一足遅れて Kubernetes を学び始める - 14. スケジューリング -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_15/",
          children: "一足遅れて Kubernetes を学び始める - 15. セキュリティ -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_16/",
          children: "一足遅れて Kubernetes を学び始める - 16. コンポーネント -"
        })
      }), "\n"]
    }), "\n", _jsx(_components.h2, {
      id: "前回",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#前回",
        children: "前回"
      })
    }), "\n", _jsxs(_components.p, {
      children: [_jsx(_components.a, {
        href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_13/",
        children: "一足遅れて Kubernetes を学び始める - 13. ヘルスチェックとコンテナライフサイクル -"
      }), "では、requests や limit といったヘルスチェックの仕方を学びました。今回は、Affinity などによるスケジューリングについて学習します。"]
    }), "\n", _jsx(_components.h2, {
      id: "スケジューリング",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#スケジューリング",
        children: "スケジューリング"
      })
    }), "\n", _jsx(_components.p, {
      children: "これから学ぶスケジューリングでは、大きく分けて２つに分類します。"
    }), "\n", _jsxs(_components.ul, {
      children: ["\n", _jsxs(_components.li, {
        children: ["Pod のスケジューリング時に特定の Node を選択する方法\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "Affinity"
          }), "\n", _jsx(_components.li, {
            children: "Anti-Affinity"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["Node に対して汚れをつけて、それを許容できる Pod のみスケジューリングを許可する方法\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "汚れ = Taints"
          }), "\n", _jsx(_components.li, {
            children: "許容 = Tolerations"
          }), "\n"]
        }), "\n"]
      }), "\n"]
    }), "\n", _jsx(_components.h2, {
      id: "node-のラベル確認",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#node-のラベル確認",
        children: "Node のラベル確認"
      })
    }), "\n", _jsx(_components.p, {
      children: "デフォルトで設定されている Node のラベルを見てみます。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " get"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " nodes"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -o"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " json"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: " |"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: " jq"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \".items[] | .metadata.labels\""
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "{"
            })
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"beta.kubernetes.io/arch\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"arm\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"beta.kubernetes.io/os\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"linux\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"kubernetes.io/arch\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"arm\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"kubernetes.io/hostname\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"raspi001\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"kubernetes.io/os\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"linux\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"node-role.kubernetes.io/master\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"\""
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "}"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "{"
            })
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"beta.kubernetes.io/arch\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"arm\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"beta.kubernetes.io/os\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"linux\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"kubernetes.io/arch\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"arm\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"kubernetes.io/hostname\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"raspi002\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"kubernetes.io/os\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"linux\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"node-role.kubernetes.io/worker\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"worker\""
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "}"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "{"
            })
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"beta.kubernetes.io/arch\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"arm\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"beta.kubernetes.io/os\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"linux\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"kubernetes.io/arch\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"arm\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"kubernetes.io/hostname\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"raspi003\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"kubernetes.io/os\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"linux\","
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "  \"node-role.kubernetes.io/worker\""
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: ":"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " \"worker\""
            })]
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "}"
            })
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "arch や os はデフォルトで設定されているみたいです。\n次以降の学習のため、ラベルをはります。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " label"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " node"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " raspi002"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " cputype=low"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " disksize="
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "200"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " label"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " node"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " raspi003"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " cputype=low"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " disksize="
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "300"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.h2, {
      id: "nodeselector",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#nodeselector",
        children: "NodeSelector"
      })
    }), "\n", _jsx(_components.p, {
      children: "最も簡単な NodeAffinity の設定です。\n指定するラベルに属する Node に Pod を割り当てるようスケジューリングします。簡易なので、equality-base のみしか指定できません。"
    }), "\n", _jsx(_components.p, {
      children: "では、disksize が 300 の Node(raspi003)に Pod を配置しましょう。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "yaml",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "yaml",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#6A737D",
                "--shiki-light": "#6A737D"
              },
              children: "## sample-nodeselector.yaml"
            })
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "apiVersion"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "v1"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "kind"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "Pod"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "metadata"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  name"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "sample-nodeselector"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  labels"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "    app"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "sample-app"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "spec"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  containers"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "    - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "name"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "nginx-container"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      image"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "nginx:1.12"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  nodeSelector"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "    disksize"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"300\""
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " apply"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-nodeselector.yaml"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " get"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " pods"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-nodeselector"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -o"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " wide"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "NAME"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "                  READY"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   STATUS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "    RESTARTS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   AGE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   IP"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "             NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "       NOMINATED"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   READINESS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " GATES"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "sample-nodeselector"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   1/1"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "     Running"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "   0"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "          21s"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "   10.244.2.130"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   raspi003"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "   <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "           <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "期待通りですね。OK です。\nnodeSelector はイコールでしか表現できないので、柔軟性に欠けます。"
    }), "\n", _jsx(_components.h2, {
      id: "affinity",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#affinity",
        children: "Affinity"
      })
    }), "\n", _jsxs(_components.p, {
      children: ["Affinity は、NodeSelector よりも柔軟に設定できます。つまり、set-based の指定方法です。\n詳しくは", _jsx(_components.a, {
        href: "https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#set-based-requirement",
        children: "こちら"
      }), "を参照下さい。今回は In オペレータを使います。"]
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "yaml",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "yaml",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#6A737D",
                "--shiki-light": "#6A737D"
              },
              children: "## sample-node-affinity.yaml"
            })
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "apiVersion"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "v1"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "kind"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "Pod"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "metadata"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  name"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "sample-node-affinity"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "spec"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  affinity"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "    nodeAffinity"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      requiredDuringSchedulingIgnoredDuringExecution"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "        nodeSelectorTerms"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "          - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "matchExpressions"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "              - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "key"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "disktype"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "                operator"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "In"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "                values"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "                  - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "hdd"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      preferredDuringSchedulingIgnoredDuringExecution"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "weight"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "1"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "          preference"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "            matchExpressions"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "              - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "key"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "kubernetes.io/hostname"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "                operator"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "In"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "                values"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "                  - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "raspi002"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  containers"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "    - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "name"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "nginx-container"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      image"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "nginx:1.12"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "NodeAffinity では、required と preferred の 2 つ設定できます。"
    }), "\n", _jsxs(_components.ul, {
      children: ["\n", _jsxs(_components.li, {
        children: ["required\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "必須スケジューリングポリシー"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["preferred\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "優先的に考慮されるスケジューリングポリシー"
          }), "\n"]
        }), "\n"]
      }), "\n"]
    }), "\n", _jsx(_components.p, {
      children: "必須条件が「cputype=low である Node(raspi002,raspi003)」で、優先条件が「hostname=raspi002 である Node」です。\n適用してみましょう。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " apply"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-node-affinity.yaml"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " get"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " pods"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-node-affinity"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -o"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " wide"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "NAME"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "                   READY"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   STATUS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "              RESTARTS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   AGE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   IP"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "       NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "       NOMINATED"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   READINESS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " GATES"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "sample-node-affinity"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   0/1"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "     ContainerCreating"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "   0"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "          5s"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "    <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   raspi002"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "   <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "           <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "確かに raspi002 に配置されました。では、raspi002 をスケジューリングできなくするとどうなるのでしょうか。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " delete"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-node-affinity.yaml"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " cordon"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " raspi002"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " apply"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-node-affinity.yaml"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " get"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " pods"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-node-affinity"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -o"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " wide"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "NAME"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "                   READY"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   STATUS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "              RESTARTS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   AGE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   IP"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "       NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "       NOMINATED"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   READINESS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " GATES"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "sample-node-affinity"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   0/1"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "     ContainerCreating"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "   0"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "          11s"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "   <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   raspi003"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "   <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "           <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "今度は、raspi002 を cordon したので、raspi003 に移りました。優先なので、満たされなくても良いのですね。必須条件が満たされなかったら、Pending になります。"
    }), "\n", _jsx(_components.p, {
      children: "元に戻します。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " delete"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-node-affinity.yaml"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " uncordon"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " raspi002"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.h2, {
      id: "and-と-or",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#and-と-or",
        children: "AND と OR"
      })
    }), "\n", _jsx(_components.p, {
      children: "nodeSelectorTerms や matchExpressions は配列なので複数指定できます。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "yaml",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "yaml",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#6A737D",
                "--shiki-light": "#6A737D"
              },
              children: "## sample.yaml"
            })
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "nodeSelectorTerms"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "  - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "matchExpressions"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "      - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "A"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "      - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "B"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "  - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "matchExpressions"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "      - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "C"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "      - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "D"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "上記の場合は、 (A and B) OR (C and D)という条件になります。"
    }), "\n", _jsx(_components.h2, {
      id: "anti-affinity",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#anti-affinity",
        children: "Anti-Affinity"
      })
    }), "\n", _jsx(_components.p, {
      children: "Anti-Affinity は、Affinity の逆です。つまり、特定 Node 以外の Node に割り当てるよう\nスケジューリングします。特別な指定はなく、単に Affinity の否定形式にするだけです。言葉だけですね。"
    }), "\n", _jsx(_components.h2, {
      id: "inter-pod-affinity",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#inter-pod-affinity",
        children: "Inter-Pod Affinity"
      })
    }), "\n", _jsx(_components.p, {
      children: "特定の Pod が実行されているドメイン上へ Pod をスケジューリングするポリシーです。\nPod 間を近づけることができるので、レイテンシを下げることができます。"
    }), "\n", _jsx(_components.p, {
      children: "まず、特定の Pod は、先程の NodeSelector で使ったものとします。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " apply"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-node-affinity.yaml"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " get"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " pods"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-nodeselector"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -o"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " wide"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "NAME"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "                  READY"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   STATUS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "    RESTARTS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   AGE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   IP"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "             NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "       NOMINATED"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   READINESS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " GATES"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "sample-nodeselector"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   1/1"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "     Running"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "   0"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "          36m"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "   10.244.2.130"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   raspi003"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "   <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "           <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "yaml",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "yaml",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#6A737D",
                "--shiki-light": "#6A737D"
              },
              children: "## sample-pod-affinity-host.yaml"
            })
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "apiVersion"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "v1"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "kind"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "Pod"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "metadata"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  name"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "sample-pod-affinity-host"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "spec"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  affinity"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "    podAffinity"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      requiredDuringSchedulingIgnoredDuringExecution"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "labelSelector"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "            matchExpressions"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "              - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "key"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "app"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "                operator"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "In"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "                values"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "                  - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "sample-app"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "          topologyKey"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "kubernetes.io/hostname"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  containers"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "    - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "name"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "nginx-container"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      image"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "nginx:1.12"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "これだと、sample-app がある Node で kubernetes.io/hostname(=raspi003)と同じ Node に Pod を割り振ります。つまり、raspi003 にできるはずです。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "text",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "text",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "pi@raspi001:~/tmp $ k apply -f sample-pod-affinity-host.yaml"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "pi@raspi001:~/tmp $  k get pods sample-pod-affinity-host -o wide"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "NAME                       READY   STATUS              RESTARTS   AGE   IP       NODE       NOMINATED NODE   READINESS GATES"
            })
          }), "\n", _jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              children: "sample-pod-affinity-host   0/1     ContainerCreating   0          11s   <none>   raspi003   <none>           <none>"
            })
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "期待通り raspi003 にできています。\nまた、required だけでなく、preferred も設定できます。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "yaml",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "yaml",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#6A737D",
                "--shiki-light": "#6A737D"
              },
              children: "## sample-pod-affinity-arch.yaml"
            })
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "apiVersion"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "v1"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "kind"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "Pod"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "metadata"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  name"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "sample-pod-affinity-arch"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "spec"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  affinity"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "    podAffinity"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      requiredDuringSchedulingIgnoredDuringExecution"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "labelSelector"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "            matchExpressions"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "              - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "key"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "app"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "                operator"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "In"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "                values"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "                  - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "sample-app"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "          topologyKey"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "kubernetes.io/arch"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      preferredDuringSchedulingIgnoredDuringExecution"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "        - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "weight"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "1"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "          podAffinityTerm"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "            labelSelector"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "              matchExpressions"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "                - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "key"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "app"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "                  operator"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "In"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "                  values"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "                    - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "sample-app"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "            topologyKey"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "kubernetes.io/hostname"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  containers"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "    - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "name"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "nginx-container"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      image"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "nginx:1.12"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "必須条件としては、下記のとおりです。"
    }), "\n", _jsxs(_components.ul, {
      children: ["\n", _jsx(_components.li, {
        children: "「label が app=sample-app である Pod が動いている Node(raspi003)で、kubernetes.io/arch が同じ Node(arm)」"
      }), "\n"]
    }), "\n", _jsx(_components.p, {
      children: "これは raspi002(arm),raspi003(arm)どちらにも当てはまります。\nそして、優先条件として、下記のとおりです。"
    }), "\n", _jsxs(_components.ul, {
      children: ["\n", _jsx(_components.li, {
        children: "「label が app=sample-app である Pod が動いている Node(raspi003)で、kubernetes.io/hostname が同じ Node(raspi003)」"
      }), "\n"]
    }), "\n", _jsx(_components.p, {
      children: "これにより、raspi003 が選ばれるはずです。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " apply"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-pod-affinity-arch.yaml"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " get"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " pods"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-pod-affinity-arch"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -o"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " wide"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "NAME"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "                       READY"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   STATUS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "              RESTARTS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   AGE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   IP"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "       NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "       NOMINATED"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   READINESS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " GATES"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "sample-pod-affinity-arch"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   0/1"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "     ContainerCreating"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "   0"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "          13s"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "   <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   raspi003"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "   <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "           <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "期待通り raspi003 で動いていますね。"
    }), "\n", _jsx(_components.h2, {
      id: "inter-pod-anti-affinity",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#inter-pod-anti-affinity",
        children: "Inter-Pod Anti-Affinity"
      })
    }), "\n", _jsx(_components.p, {
      children: "Inter-Pod Affinity の否定形です。以上。"
    }), "\n", _jsx(_components.p, {
      children: "今まで紹介した Affinity、AntiAffinity,Inter-Pod Affinity, Inter-Pod AntiAffinity は、組み合わせることができます。"
    }), "\n", _jsx(_components.h2, {
      id: "taints",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#taints",
        children: "Taints"
      })
    }), "\n", _jsx(_components.p, {
      children: "Node に対して汚れをつけていきます。汚れた Node に対して、許容する Pod のみがスケジューリングできるようになります。"
    }), "\n", _jsx(_components.p, {
      children: "汚れの種類(Effect)は、３つあります。"
    }), "\n", _jsxs(_components.ul, {
      children: ["\n", _jsxs(_components.li, {
        children: ["PreferNoSchedule\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "可能な限りスケジューリングしない"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["NoSchedule\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "スケジューリングしない（既にスケジューリングされている Pod はそのまま）"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["NoExecute\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "実行を許可しない（既にスケジューリングされている Pod は停止される）"
          }), "\n"]
        }), "\n"]
      }), "\n"]
    }), "\n", _jsx(_components.p, {
      children: "それでは、まず Node を汚しましょう。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " taint"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " node"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " raspi003"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " env=prd:NoSchedule"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " describe"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " node"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " raspi003"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: " |"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: " grep"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " Taints"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "Taints:"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "             env=prd:NoSchedule"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "これで raspi003 に Pod をスケジューリングできなくなりました。"
    }), "\n", _jsx(_components.h2, {
      id: "tolerations",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#tolerations",
        children: "Tolerations"
      })
    }), "\n", _jsx(_components.p, {
      children: "さきほど汚した Node に対して、許容(Tolerations)できる Pod を作成しましょう。"
    }), "\n", _jsx(_components.p, {
      children: "key と value(env=prd)と Effect(NoSchedule)が設定された Pod のみ許容されます。作ってみます。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "yaml",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "yaml",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsx(_components.span, {
            "data-line": "",
            children: _jsx(_components.span, {
              style: {
                "--shiki-dark": "#6A737D",
                "--shiki-light": "#6A737D"
              },
              children: "## sample-tolerations.yaml"
            })
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "apiVersion"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "v1"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "kind"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "Pod"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "metadata"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  name"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "sample-tolerations"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "spec"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  containers"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "    - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "name"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "nginx-container"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      image"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "nginx:1.12"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  tolerations"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "    - "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "key"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"env\""
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      operator"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"Equal\""
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      value"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"prd\""
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "      effect"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"NoSchedule\""
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "  nodeSelector"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ":"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#85E89D",
                "--shiki-light": "#22863A"
              },
              children: "    disksize"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: ": "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "\"300\""
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "※ nodeSelector で汚れた Node である raspi003 を指定するようにしています。"
    }), "\n", _jsx(_components.p, {
      children: "operator には、2 種類あります。"
    }), "\n", _jsxs(_components.ul, {
      children: ["\n", _jsxs(_components.li, {
        children: ["Equal\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "key と value が等しい"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["Exists\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "key が存在する"
          }), "\n"]
        }), "\n"]
      }), "\n"]
    }), "\n", _jsx(_components.p, {
      children: "では、適用してみます。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " apply"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-tolerations.yaml"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " get"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " pod"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-tolerations"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -o=wide"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "NAME"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "                 READY"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   STATUS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "    RESTARTS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   AGE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   IP"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "             NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "       NOMINATED"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " NODE"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   READINESS"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " GATES"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "sample-tolerations"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   1/1"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "     Running"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "   0"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "          27s"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: "   10.244.2.140"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "   raspi003"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "   <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: "           <"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "non"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: "e"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#F97583",
                "--shiki-light": "#D73A49"
              },
              children: ">"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.p, {
      children: "汚れた Node に許容される Pod が適用されましたね。\n許容を一部変えてみる(env=stg)と、もちろん Pending になりました。"
    }), "\n", _jsx(_components.p, {
      children: "もとに戻しておきます。"
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsx(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " taint"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " node"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " raspi003"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " env-"
            })]
          })
        })
      })
    }), "\n", _jsx(_components.h2, {
      id: "お片付け",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#お片付け",
        children: "お片付け"
      })
    }), "\n", _jsx(_components.figure, {
      "data-rehype-pretty-code-figure": "",
      children: _jsx(_components.pre, {
        tabIndex: "0",
        "data-language": "shell",
        "data-theme": "github-dark github-light",
        children: _jsxs(_components.code, {
          "data-language": "shell",
          "data-theme": "github-dark github-light",
          style: {
            display: "grid"
          },
          children: [_jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " delete"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-nodeselector.yaml"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-node-affinity.yaml"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-pod-affinity-host.yaml"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-pod-affinity-arch.yaml"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#79B8FF",
                "--shiki-light": "#005CC5"
              },
              children: " -f"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " sample-tolerations.yaml"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " label"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " node"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " raspi002"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " cputype-"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " disksize-"
            })]
          }), "\n", _jsxs(_components.span, {
            "data-line": "",
            children: [_jsx(_components.span, {
              style: {
                "--shiki-dark": "#B392F0",
                "--shiki-light": "#6F42C1"
              },
              children: "pi@raspi001:~/tmp"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#E1E4E8",
                "--shiki-light": "#24292E"
              },
              children: " $ "
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: "k"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " label"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " node"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " raspi003"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " cputype-"
            }), _jsx(_components.span, {
              style: {
                "--shiki-dark": "#9ECBFF",
                "--shiki-light": "#032F62"
              },
              children: " disksize-"
            })]
          })]
        })
      })
    }), "\n", _jsx(_components.h2, {
      id: "最後に",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#最後に",
        children: "最後に"
      })
    }), "\n", _jsxs(_components.p, {
      children: ["Pod をどの Node にスケジューリングするのか学習しました。\n汚れ(taint)と許容(tolerations)という考えは面白いなと思いました。\nただ、あまり使いすぎると複雑に陥りやすそうなので、注意が必要ですね。\n次回は、", _jsx(_components.a, {
        href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_15/",
        children: "こちら"
      }), "です。"]
    })]
  });
}
function MDXContent(props = {}) {
  const {wrapper: MDXLayout} = {
    ..._provideComponents(),
    ...props.components
  };
  return MDXLayout ? _jsx(MDXLayout, {
    ...props,
    children: _jsx(_createMdxContent, {
      ...props
    })
  }) : _createMdxContent(props);
}
return {
  default: MDXContent
};
0:{"buildId":"FFhISK9OdISz_FCZdFfxR","rsc":["$","$1","c",{"children":[["$","$L2",null,{"compiledSource":"$3","followLinks":{"bluesky":"https://bsky.app/profile/silverbirder.bsky.social","github":"https://github.com/silverbirder","rss":"https://silverbirder.github.io/rss.xml","threads":"https://www.threads.com/@silverbirder","x":"https://x.com/silverbirder"},"meta":{"postNumber":22,"publishedAt":"2019-06-05","tags":["クラウドインフラ"],"title":"一足遅れて Kubernetes を学び始める - 14. スケジューリング -"},"navigation":{"next":{"href":"/blog/contents/start_the_learning_kubernetes_15","publishedAt":"2019-06-07","title":"一足遅れて Kubernetes を学び始める - 15. セキュリティ -"},"prev":{"href":"/blog/contents/kubernetes_meetup_tokyo_19_osaka_satellite","publishedAt":"2019-06-01","title":"【大阪・梅田】Kubernetes Meetup Tokyo 19 大阪サテライト- 2019年5月31日参加レポート"}},"relatedPosts":[{"posts":[{"publishedAt":"2024-03-29","slug":"try-container-structure-test","summary":"Dockerイメージ内の構造や設定が期待通りかどうかを検証する `container-structure-test` を知りました。container-structure-test GitHub リポジトリ。せっかくなので、試してみました。","tags":["テスト","クラウドインフラ"],"title":"Docker Image に 構造化テスト container-structure-test を試してみた"},{"publishedAt":"2021-11-26","slug":"a_mockable_unit_testing_method_that_can_be_completed_only_with_big_query","summary":"BigQuery、皆さん使っていますか？ 私は、業務でBigQueryを使ったデータ構築をしています。品質担保のため、BigQueryのSQLに対してテストをしたいと考えています。本記事では、BigQueryだけで完結し、かつ、Mockデータを差し替え可能なユニットテスト手法について、紹介します。","tags":["フロントエンド","クラウドインフラ","テスト"],"title":"BigQueryだけで完結するモック可能なユニットテスト手法"},{"publishedAt":"2021-08-28","slug":"learn_point_from_building_tiktok_scrape_platform_on_gcp","summary":"TikTokへスクレイプするバッチをGCP上で構築しました。GCP構築のシステム設計話と、その構築時に、ハマったことを共有します。","tags":["サービス","クラウドインフラ","成果物","クローリング"],"title":"TikTokスクレイプ基盤をGCP上で構築してハマったこと"}],"tag":"クラウドインフラ"}],"shareUrl":"https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_14/","slug":"start_the_learning_kubernetes_14"}],["$L4"],"$L5"]}],"loading":null,"isPartial":false}
4:["$","script","script-0",{"src":"/_next/static/chunks/f06f97cc5d67ef22.js","async":true}]
5:["$","$L6",null,{"children":["$","$7",null,{"name":"Next.MetadataOutlet","children":"$@8"}]}]
8:null
