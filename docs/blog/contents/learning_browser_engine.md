---
title: ãƒ–ãƒ©ã‚¦ã‚¶ã®ä»•çµ„ã¿ã‚’å­¦ã¶
published: true
date: 2021-05-24
description: Webãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŸã‚‹ã‚‚ã®ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ä»•çµ„ã¿ã«èˆˆå‘³ã‚’æŒã¤ã®ã¯è‡ªç„¶ã®æ‘‚ç†ã§ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ã€ç§ãŒãƒ–ãƒ©ã‚¦ã‚¶ã®ä»•çµ„ã¿ã‚’å­¦ã‚“ã§ã„ãéç¨‹ã‚’å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã—ã¾ã™ã€‚
tags: ["Browser", "Learning"]
cover_image: https://res.cloudinary.com/silverbirder/image/upload/v1621950014/silver-birder.github.io/blog/remotar-jobs-s5kTY-Ve1c0-unsplash.jpg
socialMediaImage: https://res.cloudinary.com/silverbirder/image/upload/v1621950014/silver-birder.github.io/blog/remotar-jobs-s5kTY-Ve1c0-unsplash.jpg
---

<!-- TODO: <span>Photo by <a href="https://unsplash.com/@remotarjobs?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Remotar Jobs</a> on <a href="https://unsplash.com/s/photos/chrome-browser?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></span> -->

Webãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŸã‚‹ã‚‚ã®ã€**ãƒ–ãƒ©ã‚¦ã‚¶ã®ä»•çµ„ã¿ã«èˆˆå‘³ã‚’æŒã¤ã®ã¯è‡ªç„¶ã®æ‘‚ç†**ã§ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ã€ç§ãŒãƒ–ãƒ©ã‚¦ã‚¶ã®ä»•çµ„ã¿ã‚’å­¦ã‚“ã§ã„ãéç¨‹ã‚’å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã—ã¾ã™ã€‚

# ã¿ã‚“ãªå¤§å¥½ãChrome
Webãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«æ„›ã•ã‚Œã¦ã„ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ã¨ã„ãˆã°ã€~~IE~~Chromeã§ã™ã‚ˆã­ã€‚
ãƒ–ãƒ©ã‚¦ã‚¶ã§HTML,CSS,JSã®å‹•ä½œç¢ºèªã™ã‚‹ã®ã¯ã€æ—¥å¸¸èŒ¶é£¯äº‹ã§ã™ã€‚
ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚ˆã£ã¦å‹•ä½œãŒç•°ãªã‚‹ã“ã¨ã¯ã€Webãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãªã‚‰å‘¨çŸ¥ã®äº‹å®Ÿã§ã™ã€‚
ã˜ã‚ƒã‚ã€ãªã‚“ã§å‹•ä½œãŒé•ã†ã®ã‹ã¨ã„ã†ã¨ã€

* ã€Œãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³ãŒé•ã†ã‹ã‚‰ã€œã€
* ã€ŒJavascriptã‚¨ãƒ³ã‚¸ãƒ³ãŒé•ã†ã‹ã‚‰ã€œã€

ãã‚‰ã„ã¯çŸ¥ã£ã¦ã„ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚
ã˜ã‚ƒã‚ã€ãã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³ã£ã¦ã©ã†ã„ã†ä»•çµ„ã¿ã§å‹•ã„ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚
æ°—ã«ãªã‚Šã¾ã™ã‚ˆã­ã€‚

# Chromiumã«ã¤ã„ã¦

Chromiumã‚‚ã€ãŸã¶ã‚“ã”å­˜ã˜ã®æ–¹å¤šã„ã®ã‹ãªã¨æ€ã„ã¾ã™ã®ã§ã€ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ã€‚

Chromiumã¯ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã§ã‚ã‚Šã€ãƒ–ãƒ©ã‚¦ã‚¶åã§ã‚‚ã‚ã‚Šã¾ã™ã€‚
Chromeã¯ã€Chromiumã‚’å…ƒã«é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚
è©³ã—ã„èª¬æ˜ã¯[Chromium - Wiki](https://en.wikipedia.org/wiki/Chromium_(web_browser))ã‚’è¦‹ã¦ãã ã•ã„ã€‚

ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã£ã¦ã“ã¨ã¯ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒèª°ã§ã‚‚èª­ã‚ã¡ã‚ƒã†ã£ã¦ã“ã¨ã§ã™ã‚ˆã­ã€‚
ã ã£ãŸã‚‰ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®å‹•ä½œã‚’çŸ¥ã‚‹ã“ã¨ãŒã§ãã¡ã‚ƒã†ã˜ã‚ƒãªã„ã§ã™ã‹ï¼
ã‚ãƒ¼ã„ï¼ğŸ˜

# Chromiumã®ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°

ã§ã¯ã•ã£ããã€Chromiumã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

ã“ã‚Œã§ã™ã€‚

<figure title="chromium/src">
<img src="https://res.cloudinary.com/silverbirder/image/upload/v1622126149/silver-birder.github.io/blog/chromium_src.png" alt="chromium/src">
<figcaption><span><a href="https://source.chromium.org/chromium/chromium/src">chromium/src - source.chromium.org</a></span></figcaption>
</figure>

[Chromium - Wiki](https://en.wikipedia.org/wiki/Chromium_(web_browser))ã«ã‚ˆã‚Œã°ã€Chromiumã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ç´„3,500ä¸‡è¡Œã‚ã‚‹ãã†ã§ã™ã€‚
ã—ã‹ã‚‚ã€è¨€èªã¯C++ã€‚ç§ã¯ã‚ã¾ã‚Šãã‚Œã‚’è©³ã—ããªã„ã®ã§ã™ğŸ˜ã€‚

å®Ÿéš›ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚·ãƒ³(Macbook Air)ã¸ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ã€ãƒ“ãƒ«ãƒ‰ã‚’ã—ã¦ã¿ã¾ã—ãŸã€‚
ãƒã‚·ãƒ³ãŒè²§å¼±ã ã¨ã„ã†ã®ã‚‚ã‚ã‚‹ã‚“ã§ã™ãŒã€ãƒ“ãƒ«ãƒ‰ã«åŠæ—¥ãã‚‰ã„ã‹ã‹ã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ãƒ˜ãƒˆãƒ˜ãƒˆã§ã™ã€‚
ã“ã‚Œã˜ã‚ƒã‚ã•ã™ãŒã«ã€æ‰‹è»½ã«ãƒ–ãƒ©ã‚¦ã‚¶ã®å‹•ä½œç¢ºèªã¯ã§ããã†ã«ãªã„ã§ã™ã€‚

# ãƒ–ãƒ©ã‚¦ã‚¶ã®ä»•çµ„ã¿è³‡æ–™ã‚’èª­ã‚€

ã¡ã‚‡ã£ã¨è¶£å‘ã‚’å¤‰ãˆã¦ã€æ¬¡ã®ã‚ˆã†ãªè³‡æ–™ã‚’èª­ã‚€ã“ã¨ã«ã—ã¾ã—ãŸã€‚

* [ãƒ–ãƒ©ã‚¦ã‚¶ã®ä»•çµ„ã¿: æœ€æ–°ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ã®å†…éƒ¨æ§‹é€ ](https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/)
  * è¨˜äº‹ã®å…¬é–‹æ—¥ãŒ2011å¹´8æœˆ5æ—¥ãªã®ã§ã€è‰²ã€…å¤ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã§ã¯ã€ã•ã£ããè¦‹ã¦ã„ãã¾ã™ã€‚
æœ€åˆã«ç›®ã«ã¤ãã®ãŒã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ä¸»ãªæ§‹æˆè¦ç´ ã§ã™ã€‚

<figure title="ãƒ–ãƒ©ã‚¦ã‚¶ã®ä¸»ãªæ§‹æˆè¦ç´ ">
<img src="https://res.cloudinary.com/silverbirder/image/upload/v1656253204/silver-birder.github.io/blog/%E3%83%95%E3%82%99%E3%83%A9%E3%82%A6%E3%82%B5%E3%82%99%E3%81%AE%E6%A7%8B%E6%88%90%E8%A6%81%E7%B4%A0.png" alt="ãƒ–ãƒ©ã‚¦ã‚¶ã®ä¸»ãªæ§‹æˆè¦ç´ ">
<figcaption><span><a href="https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/">ãƒ–ãƒ©ã‚¦ã‚¶ã®ä¸»ãªæ§‹æˆè¦ç´  - www.html5rocks.com</a></span></figcaption>
</figure>

æ§‹æˆè¦ç´ ã®å†…ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³ã«ç€ç›®ã—ã¾ã™ã€‚
ãã‚Œãã‚Œã€æ¬¡ã®å½¹å‰²ãŒã‚ã‚Šã¾ã™ã€‚

* ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
  * ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã‚„æˆ»ã‚‹/é€²ã‚€ãƒœã‚¿ãƒ³ã®ã‚ˆã†ãªUIã‚’æ‹…å½“
* ãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³
  * UIã¨ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³ã®é–“ã®å‡¦ç†ã‚’æ•´ç†
* ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³
  * è¦æ±‚ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„(HTMLãªã©)ã®è¡¨ç¤ºã‚’æ‹…å½“

ã¡ãªã¿ã«ã€Chromiumã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³ã«ã¯ã€webkitã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸãŒã€blinkã«å¤‰ã‚ã‚Šã¾ã—ãŸã€‚

* [webkit](https://webkit.org/)
* [blink](https://www.chromium.org/blink)

ãƒ–ãƒ©ã‚¦ã‚¶ã®åŸºæœ¬çš„ãªãƒ•ãƒ­ãƒ¼ã¯ã€æ¬¡ã®å›³ã®é€šã‚Šã§ã™ã€‚

<figure title="ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®åŸºæœ¬çš„ãªãƒ•ãƒ­ãƒ¼">
<img src="https://res.cloudinary.com/silverbirder/image/upload/v1656253204/silver-birder.github.io/blog/%E3%83%AC%E3%83%B3%E3%82%BF%E3%82%99%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%99%E3%82%A8%E3%83%B3%E3%82%B7%E3%82%99%E3%83%B3%E5%9F%BA%E6%9C%AC%E3%83%95%E3%83%AD%E3%83%BC.png" alt="ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®åŸºæœ¬çš„ãªãƒ•ãƒ­ãƒ¼">
<figcaption><span><a href="https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®åŸºæœ¬çš„ãªãƒ•ãƒ­ãƒ¼ - www.html5rocks.com</a></span></figcaption>
</figure>

<figure title="Webkitã®ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼">
<img src="https://res.cloudinary.com/silverbirder/image/upload/v1656253203/silver-birder.github.io/blog/Webkit%E3%81%AE%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%95%E3%83%AD%E3%83%BC.png" alt="Webkitã®ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼">
<figcaption><span><a href="https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/">Webkitã®ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼ - www.html5rocks.com</a></span></figcaption>
</figure>

1. Parsing HTML to construct the DOM tree
2. Render tree construction
3. Layout of the render tree
4. Painting the render tree

ãã‚Œãã‚Œè¦‹ã¦ã„ãã¾ã™ã€‚

----
â‘  Parsing HTML to construct the DOM tree

1ã¯ã€HTMLã‚’ãƒ¬ã‚­ã‚µ(å­—å¥è§£æ. ex:flex)ãƒ»ãƒ‘ãƒ¼ã‚µ(æ§‹æ–‡è§£æ. ex:bison)ã‚’ä½¿ã£ã¦DOMãƒ„ãƒªãƒ¼ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

ãƒ¬ã‚­ã‚µã§ã¯ã€ã‚¹ãƒ†ãƒ¼ãƒˆãƒã‚·ãƒ³ã«ã‚ˆã£ã¦èª­ã¿è¾¼ã¿çŠ¶æ…‹ã‚’ç®¡ç†ã—ã¤ã¤ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è­˜åˆ¥ã—ã¾ã™ã€‚ç©ºç™½ã¨ã‹ã‚³ãƒ¡ãƒ³ãƒˆãªã©ã¯å‰Šé™¤ã•ã‚Œã¾ã™ã€‚

ãƒ¬ã‚­ã‚µã‹ã‚‰è­˜åˆ¥ã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ‘ãƒ¼ã‚µã«æ¸¡ã—ã€æ§‹æ–‡è§£æã—ã¦ã„ãã¾ã™ã€‚
HTMLã¯DTDï¼ˆDocument Type Definitionï¼‰ã§æ–‡è„ˆè‡ªç”±æ–‡æ³•ãªãŸã‚ã€æ©Ÿæ¢°çš„ã«è§£æã§ãã¾ã™ã€‚
ãŸã ã€HTMLã¯å¯›å¤§ãªä»•æ§˜ã§ã€æ¬¡ã®ã‚ˆã†ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚è¨±å®¹ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

* `<br>`ã®ä»£ã‚ã‚Šã®`</br>`
* è¿·å­ã®ãƒ†ãƒ¼ãƒ–ãƒ«
* å…¥ã‚Œå­ã®ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ 
* æ·±ã™ãã‚‹ã‚¿ã‚°éšå±¤
* é…ç½®ã«èª¤ã‚Šã®ã‚ã‚‹ html ã¾ãŸã¯ body çµ‚äº†ã‚¿ã‚°

ãƒ‘ãƒ¼ã‚µã‹ã‚‰DOMï¼ˆDocument Object Modelï¼‰ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
DOMã¯ã€ã“ã‚Œã¾ã§ã®å˜ãªã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ã€APIã‚’æŒãŸã›ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚‹ã“ã¨ã§ã€
ä»¥é™ã¯DOMã‚’ä½¿ã£ã¦å‡¦ç†ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

<figure title="ã‚µãƒ³ãƒ—ãƒ« ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã®DOMãƒ„ãƒªãƒ¼">
<img src="https://res.cloudinary.com/silverbirder/image/upload/v1656253203/silver-birder.github.io/blog/%E3%82%B5%E3%83%B3%E3%83%95%E3%82%9A%E3%83%AB%E3%83%9E%E3%83%BC%E3%82%AF%E3%82%A2%E3%83%83%E3%83%95%E3%82%9A%E3%81%AEDOM%E3%83%84%E3%83%AA%E3%83%BC.png" alt="ã‚µãƒ³ãƒ—ãƒ« ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã®DOMãƒ„ãƒªãƒ¼">
<figcaption><span><a href="https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/">ã‚µãƒ³ãƒ—ãƒ« ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã®DOMãƒ„ãƒªãƒ¼ - www.html5rocks.com</a></span></figcaption>
</figure>

ã“ã‚Œã¾ã§ã¯HTMLã®è©±ã‚’ã—ã¦ã„ã¾ã—ãŸãŒã€HTMLã¨ä¸¦è¡Œã—ã¦CSSã‚‚åŒæ§˜ã«å‡¦ç†ã—ã¦ã„ããƒ¬ãƒ³ãƒ€ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã„ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚¹ã‚¿ã‚¤ãƒ«æƒ…å ±ã‚’ä»˜ä¸ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãªã‚Šã¾ã™ã€‚
åŸºæœ¬çš„ã«ã€CSSã¨HTMLã¯äº’ã„ã«ç‹¬ç«‹ã—ã¦ã„ã‚‹ã®ã§ã€ä¸¦åˆ—å‡¦ç†ãŒå¯èƒ½ã§ã™ã€‚ä¾‹ãˆã°ã€CSSã‚’å‡¦ç†ã—ãŸã“ã¨ã§ã€HTMLãŒå¤‰åŒ–ã™ã‚‹ã“ã¨ã¯ãªã„ã¯ãšã§ã™ã€‚

<figure title="CSSã®è§£æ">
<img src="https://res.cloudinary.com/silverbirder/image/upload/v1656253203/silver-birder.github.io/blog/CSS%E3%81%AE%E8%A7%A3%E6%9E%90.png" alt="CSSã®è§£æ">
<figcaption><span><a href="https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/">CSSã®è§£æ - www.html5rocks.com</a></span></figcaption>
</figure>

ãŸã ã€Javascriptã¯è©±ãŒé•ã†ã®ã§ã€JavascriptãŒèª­ã¿è¾¼ã¾ã‚ŒãŸæ™‚ç‚¹ã§HTMLã®ãƒ‘ãƒ¼ã‚¹ã‚’ä¸­æ–­ã—ã¦Javascriptã®ãƒ‘ãƒ¼ã‚¹ãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚
ã¾ãŸã€JavascriptãŒã€ã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã®å½±éŸ¿ã‚’å—ã‘ãã†ãªç‰¹å®šã®ã‚¹ã‚¿ã‚¤ãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå ´åˆã€Javascriptã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚

----
â‘¡ Render tree construction

â‘ ã®DOMã¨ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã€ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
DOMã¨ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€1å¯¾1ã¨ã„ã†è¨³ã§ã¯ãªãã€ä¾‹ãˆã°headè¦ç´ ã‚„ã€`display:none;`ã®è¦ç´ ã‚‚ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼ã«å«ã¾ã‚Œã¾ã›ã‚“ã€‚
ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼ã®æ›´æ–°ã¯ã€DOMãƒ„ãƒªãƒ¼ãŒæ›´æ–°ã•ã‚Œã‚‹åº¦ã«è¡Œã‚ã‚Œã¾ã™ã€‚

<figure title="ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼ã¨å¯¾å¿œã™ã‚‹DOMãƒ„ãƒªãƒ¼">
<img src="https://res.cloudinary.com/silverbirder/image/upload/v1656253203/silver-birder.github.io/blog/%E3%83%AC%E3%83%B3%E3%82%BF%E3%82%99%E3%83%BC%E3%83%84%E3%83%AA%E3%83%BC%E3%81%A8%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8BDOM%E3%83%84%E3%83%AA%E3%83%BC.png" alt="ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼ã¨å¯¾å¿œã™ã‚‹DOMãƒ„ãƒªãƒ¼">
<figcaption><span><a href="https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/">ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼ã¨å¯¾å¿œã™ã‚‹DOMãƒ„ãƒªãƒ¼ - www.html5rocks.com</a></span></figcaption>
</figure>

ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¨ˆç®—ã™ã‚‹ã®ã§ã™ãŒã€ã¡ã‚‡ã£ã¨è¤‡é›‘ã§ã™ã€‚
è©³ã—ãã¯ã€[ã‚¹ã‚¿ã‚¤ãƒ«ã®è¨ˆç®—](https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/#Style_Computation)ã‚’è¦‹ã¦ãã ã•ã„ã€‚

----
â‘¢ Layout of the render tree

ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼ã‹ã‚‰ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæƒ…å ±ã‚’è¨ˆç®—ã—ã¦ã„ãã¾ã™ã€‚
ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæƒ…å ±ã¨ã¯ã€ä½ç½®(x,y)ã¨ã‚µã‚¤ã‚º(width,height)ã§ã™ã€‚

ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼ã®ãƒ«ãƒ¼ãƒˆã‹ã‚‰å†å¸°çš„ã«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæƒ…å ±ã‚’è¨ˆç®—(layoutãƒ¡ã‚½ãƒƒãƒ‰)ã—ã¦ã„ãã¾ã™ã€‚

1. è¦ªãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ãŒè‡ªèº«ã®å¹…ã‚’æ±ºå®šã—ã¾ã™ã€‚
2. è¦ªãŒå­ã‚’ç¢ºèªã—ã¦ã€
   1. å­ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã‚’é…ç½®ã—ã¾ã™ï¼ˆxã¨yã‚’è¨­å®šã—ã¾ã™ï¼‰ã€‚
   2. å¿…è¦ãªå ´åˆã¯å­ã®layoutãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å­ã®é«˜ã•ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
3. è¦ªã¯å­ã®é«˜ã•ã®ç´¯ç©ã€ãƒãƒ¼ã‚¸ãƒ³ã®é«˜ã•ã€ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½¿ç”¨ã—ã¦ã€è‡ªèº«ã®é«˜ã•ã‚’è¨­å®šã—ã¾ã™ã€‚ã“ã®é«˜ã•ã¯è¦ªãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã®ã•ã‚‰ã«è¦ªã«ã‚ˆã£ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

â€» [ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå‡¦ç†](https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/#The_layout_process) å‚è€ƒ

CSSãƒœãƒƒã‚¯ã‚¹ãƒ¢ãƒ‡ãƒ«ã®å›³ã‚’å‚è€ƒã¾ã§ã«å…±æœ‰ã—ã¦ãŠãã¾ã™ã€‚

<figure title="CSS åŸºæœ¬ãƒœãƒƒã‚¯ã‚¹ãƒ¢ãƒ‡ãƒ«">
<img src="https://developer.mozilla.org/ja/docs/Web/CSS/CSS_Box_Model/Introduction_to_the_CSS_box_model/boxmodel-(3).png" alt="CSS åŸºæœ¬ãƒœãƒƒã‚¯ã‚¹ãƒ¢ãƒ‡ãƒ«">
<figcaption><span><a href="https://developer.mozilla.org/ja/docs/Web/CSS/CSS_Box_Model/Introduction_to_the_CSS_box_model">CSS åŸºæœ¬ãƒœãƒƒã‚¯ã‚¹ãƒ¢ãƒ‡ãƒ« - developer.mozilla.org</a></span></figcaption>
</figure>

---
â‘£ Painting the render tree

ã‚ˆã†ã‚„ãæç”»ã—ã¾ã™ã€‚
ã©ã“ã«æç”»ã™ã‚‹ã‹ã¨ã„ã†é…ç½®æ–¹æ³•ã«ã¤ã„ã¦è€ƒãˆã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
å¤§ããåˆ†ã‘ã¦ã€3ã¤ã«åˆ†ã‹ã‚Œã¾ã™ã€‚

* é€šå¸¸
  * ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã®å ´æ‰€ã«å¾“ã£ã¦é…ç½®ã•ã‚Œã¾ã™ã€‚ã¤ã¾ã‚Šã€ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼å†…ã®å ´æ‰€ã¯DOMãƒ„ãƒªãƒ¼å†…ã®å ´æ‰€ã¨åŒæ§˜ã«ãªã‚Šã€ãƒœãƒƒã‚¯ã‚¹ã®ç¨®é¡ã‚„å¯¸æ³•ã«å¾“ã£ã¦ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã•ã‚Œã¾ã™ã€‚
    * position:static,relative
* ãƒ•ãƒ­ãƒ¼ãƒˆ
  * ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯æœ€åˆã«é€šå¸¸ã®ãƒ•ãƒ­ãƒ¼ã®ã‚ˆã†ã«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã•ã‚Œã¦ã‹ã‚‰ã€å·¦å³ã®ã§ãã‚‹ã ã‘é ãã«ç§»å‹•ã•ã‚Œã¾ã™ã€‚
    * float:right,left
* çµ¶å¯¾
  * ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼å†…ã§DOMãƒ„ãƒªãƒ¼ã¨ã¯ç•°ãªã‚‹å ´æ‰€ã«é…ç½®ã•ã‚Œã¾ã™ã€‚
    * position:absolute,fixed

â€» [é…ç½®æ–¹æ³•](https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/#Positioning_scheme)

é…ç½®æ–¹æ³•ãŒåˆ†ã‹ã‚Œã°ã€ä»Šåº¦ã¯æç”»ã™ã‚‹å½¢ã«ã¤ã„ã¦è€ƒãˆã¾ã™ã€‚ãƒ–ãƒ­ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¨ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒœãƒƒã‚¯ã‚¹ã§ã™ã€‚

<figure title="ãƒ–ãƒ­ãƒƒã‚¯ã¨ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã®é…åˆ—">
<img src="https://res.cloudinary.com/silverbirder/image/upload/v1656253203/silver-birder.github.io/blog/%E3%83%95%E3%82%99%E3%83%AD%E3%83%83%E3%82%AF%E3%81%A8%E3%82%A4%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%AE%E9%85%8D%E5%88%97.png" alt="ãƒ–ãƒ­ãƒƒã‚¯ã¨ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã®é…åˆ—">
<figcaption><span><a href="https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/">ãƒ–ãƒ­ãƒƒã‚¯ã¨ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã®é…åˆ— - www.html5rocks.com</a></span></figcaption>
</figure>

ãƒ–ãƒ­ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¯ã€çŸ­å½¢ã®å½¢ã§ã‚ã‚Šå‚ç›´ã«ä¸¦ã³ã¾ã™ã€‚
ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒœãƒƒã‚¯ã‚¹ã¯ã€ç‹¬è‡ªã®å½¢ã‚’æŒãŸãšæ°´å¹³ã«ä¸¦ã³ã¾ã™ã€‚

z-indexã®ã‚ˆã†ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã¯ã€ã‚¹ã‚¿ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨ã„ã†æ¦‚å¿µã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
è©³ã—ãã¯ã€[é‡ã­åˆã‚ã›ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ - developer.mozilla.org](https://developer.mozilla.org/ja/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context) ã‚’ã”ç¢ºèªãã ã•ã„ã€‚

---

# ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è‡ªä½œã—ã¦ã¿ã‚‹
å‰ç« ã§ã¯ã€è³‡æ–™ã‚’é€šã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã®å‹•ä½œãŒç†è§£ã§ãã¾ã—ãŸã€‚
èª­ã‚€ã ã‘ã˜ã‚ƒãªãã€å‹•ã‹ã—ã¦ç†è§£ã—ã¦ã¿ãŸã„ã¨ã¯æ€ã„ã¾ã›ã‚“ã‹ï¼Ÿ
ãã†ã§ã™ã€è‡ªä½œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

Rustè£½ã®Servoã¨ã„ã†ãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³ã‚’é–‹ç™ºã—ã¦ã„ã‚‹äººãŒæ›¸ã„ãŸã€æ¬¡ã®ãƒ–ãƒ©ã‚¦ã‚¶è‡ªä½œã«é–¢ã™ã‚‹è¨˜äº‹ãŒã¨ã¦ã‚‚åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚

* [Let's build a browser engine! Part 1: Getting started](https://limpet.net/mbrubeck/2014/08/08/toy-layout-engine-1.html)
  * [mbrubeck/robinson](https://github.com/mbrubeck/robinson)
    * Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(mbrubeck)
    * Rustè£½

Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(mbrubeck)ã®ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼ãŒã€ã“ã‚Œã¾ã§ã®è©±ã¨ã¨ã¦ã‚‚ä¼¼ã¦ã„ã¾ã™ã€‚

<figure title="Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(mbrubeck)ã®ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼">
<img src="https://res.cloudinary.com/silverbirder/image/upload/v1622034177/silver-birder.github.io/blog/mbrubeck_toy-layout-engine-7-painting.png" alt="Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(mbrubeck)ã®ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼">
<figcaption><span><a href="https://limpet.net/mbrubeck/2014/11/05/toy-layout-engine-7-painting.html">Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(mbrubeck)ã®ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼ - limpet.net</a></span></figcaption>
</figure>

Style treeã¯ã€ã“ã‚Œã¾ã§ã®è©±ã§ã„ã†ã¨Render treeã ã¨æ€ã„ã¾ã™ã€‚
Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(mbrubeck)ã«ã€æ¬¡ã®HTMLã¨CSSã‚’èª­ã¿è¾¼ã¾ã›ã‚‹ã¨ã€ä¸‹è¨˜ã®ç”»åƒã®ã‚ˆã†ãªã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã«ãªã‚Šã¾ã™ã€‚

```html
<!-- https://github.com/mbrubeck/robinson/blob/master/examples/test.html -->
<html>
  <head>
    <title>Test</title>
  </head>
  <div class="outer">
    <p class="inner">
      Hello, <span id="name">world!</span>
    </p>
    <p class="inner" id="bye">
      Goodbye!
    </p>
  </div>
</html>
```

```css
/* https://github.com/mbrubeck/robinson/blob/master/examples/test.css */
* {
  display: block;
}

span {
  display: inline;
}

html {
  width: 600px;
  padding: 10px;
  border-width: 1px;
  margin: auto;
  background: #ffffff;
}

head {
  display: none;
}

.outer {
  background: #00ccff;
  border-color: #666666;
  border-width: 2px;
  margin: 50px;
  padding: 50px;
}

.inner {
  border-color: #cc0000;
  border-width: 4px;
  height: 100px;
  margin-bottom: 20px;
  width: 500px;
}

.inner#bye {
  background: #ffff00;
}

span#name {
  background: red;
  color: white;
}
```

<figure title="Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(mbrubeck)ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ">
<img src="https://res.cloudinary.com/silverbirder/image/upload/v1622034247/silver-birder.github.io/blog/mbrubeck_robinson_output.png" alt="Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(mbrubeck)ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ">
<figcaption><span><a href="https://github.com/mbrubeck/robinson">Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(mbrubeck)ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ - github.com/mbrubeck/robinson</a></span></figcaption>
</figure>

æ¬¡ã®ãƒªãƒ³ã‚¯ã«ã‚ã‚‹è‡ªä½œãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³ã¯ã€[mbrubeck/robinson](https://github.com/mbrubeck/robinson)ã‚’å‚è€ƒã«ã—ã¦ä½œã‚‰ã‚ŒãŸã‚‚ã®ã ãã†ã§ã™ã€‚

* [askerry/toy-browser](https://github.com/askerry/toy-browser)
  * Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(askerry)
  * C++è£½

Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(askerry)ã«ã€æ¬¡ã®HTMLã¨CSSã‚’èª­ã¿è¾¼ã¾ã›ã‚‹ã¨ã€ä¸‹è¨˜ã®ç”»åƒã®ã‚ˆã†ãªã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã«ãªã‚Šã¾ã™ã€‚
è¦‹ãŸã‚‰åˆ†ã‹ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ã¨ã¦ã‚‚é«˜æ©Ÿèƒ½ã§ã™ã€‚

```html
<!-- https://github.com/askerry/toy-browser/blob/master/examples/demo.html -->
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Browser Test</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="demo.css"/>
    </head>

    <body>
        <div id="page">
            <header class="header">
                <h1>Toy Browser Engine</h1>
            </header>
            <div id="main">
                <div id="navbar">
                    <a href="#" class="navitem">
                        Home
                    </a>
                    <a href="#" class="navitem">
                        About
                    </a>
                    <a href="#" class="navitem">
                        Some random stuff
                    </a>
                    <a href="#" class="navitem">
                        Conclusion
                    </a>
                    <img class="img" src="images/otters.jpg"/>
                </div>
                <div id="content">
                    <h2>What is this?</h2>
                    This is a <b>toy</b> browser engine, implemented for
                    <span>fun </span> <img class="icon" src="images/fun.png"/>
                    and <span>glory <img class="icon" src="images/glory.png"/></span>.
                    <h2>Why would anyone do this?</h2>
                    This seems pretty pointless! But I had a few goals:
                    <ul>
                        <li>Something to build to learn C++</li>
                        <li>Learn more about how browsers work</li>
                        <li>Make something I've never made before</li>
                    </ul>
                    <h2>What can it do?</h2>
                    <p>
                        Currently, the engine can parse a subset of HTML
                        and build a DOM tree. It can also parse a small subset of
                        CSS (sometimes incorrectly) and use simple selector matching
                        to apply styles to elements.
                    </p>
                    <p>
                        It supports <em>very basic</em> rendering of boxes, images, and
                        text with simple block and inline layouts.
                    </p>
                </div>
            </div>
        </div>
    </body>
</html>
```

```css
/* https://github.com/askerry/toy-browser/blob/master/examples/demo.css */
body {
    font-family: Arial, sans-serif;
    background-color: #BFC0C0;
    color: #253237;
    font-size: 16px;
}
#page {
    padding: 20;
    /* width: 800px; */
    margin: auto;
}

header {
    padding: 10px;
    padding-left: 20px;
    background-color: #434371;
    color: #4acebd;
}

span {
    color: #4acebd;
}

#main {
    background-color: white;
    display: flex;
}

#navbar {
    width: 180px;
    padding: 30px;
    background-color: #4acebd;
    height: 500px;
}

.navitem {
    display: block;
    text-align: center;
    background-color: #434371;
    color: #4acebd;
    margin-top: 5px;
    margin-bottom: 5px;
    padding: 10px;
    border-radius: 4px;
    border-style: solid;
    border-width: 2px;
    border-color: #253237;
}

#content {
    padding: 20px;
    width: 500;
}

.img {
    width: 180px;
}

.icon {
    width: 2em;
}

h2 {
    color: #434371;
}

li {
    margin-bottom: 5px;
}
```

<figure title="Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(askerry)ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ">
<img src="https://github.com/askerry/toy-browser/raw/master/examples/demo.png" alt="Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(askerry)ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ">
<figcaption><span><a href="https://github.com/askerry/toy-browser">Toyãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³(askerry)ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ - github.com/askerry/toy-browser</a></span></figcaption>
</figure>

ç§ã¨ã—ã¦ã¯ã€ã“ã¡ã‚‰ã®æ–¹ãŒèˆˆå‘³ãŒã‚ã‚‹ã®ã§ã€ã¾ãšã“ã¡ã‚‰ã‚’çŸ¥ã‚Šã€ãã‚Œã‚’Rustç‰ˆã§ä½œã‚Šç›´ã—ãŸã„ãªã¨æ€ã„ã¾ã™ã€‚

# C++ ã‚’å­¦ã¶

ã•ã¦ã€C++ã‚’å­¦ã¶ãŸã‚ã«ã€æ¬¡ã®ã‚µã‚¤ãƒˆã‚’ã–ã£ã¨çœºã‚ã¦ã¿ã¾ã™ã€‚

* [C++å…¥é–€ - www.asahi-net.or.jp](http://www.asahi-net.or.jp/~yf8k-kbys/newcpp0.html)
* [C++å…¥é–€ - wisdom.sakura.ne.jp](http://wisdom.sakura.ne.jp/programming/cpp/)
* [C++å…¥é–€ - kaitei.net](http://kaitei.net/cpp/)

# è‡ªä½œãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

[askerry/toy-browser](https://github.com/askerry/toy-browser)ã®ãƒ¡ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰(main.cc)ã‚’è¼‰ã›ã¾ã™ã€‚

```c
/* https://github.com/askerry/toy-browser/blob/master/src/main.cc */
namespace {

void renderWindow(int width, int height, const style::StyledNode &sn,
                  sf::RenderWindow *window) {
  layout::Dimensions viewport;
  viewport.content.width = width;
  viewport.content.height = height;
  // Create layout tree for the specified viewport dimensions.
  std::unique_ptr<layout::LayoutElement> layout_root =
      layout::layout_tree(sn, viewport);
  // Paint to window.
  paint(*layout_root, viewport.content, window);
}

int windowLoop(const style::StyledNode &sn) {
  // Create browser window.
  std::unique_ptr<sf::RenderWindow> window(new sf::RenderWindow());
  window->create(sf::VideoMode(FLAGS_window_width, FLAGS_window_height),
                 "Toy Browser", sf::Style::Close | sf::Style::Resize);
  window->setPosition(sf::Vector2i(0, 0));
  window->clear(sf::Color::Black);
  // Render initial window contents.
  renderWindow(FLAGS_window_width, FLAGS_window_height, sn, window.get());
  // Run the main event loop as long as the window is open.
  while (window->isOpen()) {
    sf::Event event;
    while (window->pollEvent(event)) {
      switch (event.type) {
        case sf::Event::Closed:
          window->close();
          break;

        case sf::Event::KeyPressed:
          logger::debug("keypress: " + std::to_string(event.key.code));
          break;

        case sf::Event::Resized:
          logger::debug("new width: " + std::to_string(event.size.width));
          logger::debug("new height: " + std::to_string(event.size.height));
          window->clear(sf::Color::Black);
          renderWindow(event.size.width, event.size.height, sn, window.get());
          break;

        case sf::Event::TextEntered:
          if (event.text.unicode < 128) {
            logger::debug(
                "ASCII character typed: " +
                std::to_string(static_cast<char>(event.text.unicode)));
          }
          break;

        default:
          break;
      }
    }
  }
  return 0;
}
}  // namespace
int main(int argc, char **argv) {
  gflags::ParseCommandLineFlags(&argc, &argv, true);

  // Parse HTML and CSS files.
  const std::string source = io::readFile(FLAGS_html_file);
  std::unique_ptr<dom::Node> root = html_parser::parseHtml(source);
  const std::string css = io::readFile(FLAGS_css_file);
  const std::unique_ptr<css::StyleSheet const> stylesheet = css::parseCss(css);

  // Initialize font registry singleton.
  text_render::FontRegistry *registry =
      text_render::FontRegistry::getInstance();

  // Align styles with DOM nodes.
  std::unique_ptr<style::StyledNode> styled_node =
      style::styleTree(*root, stylesheet, style::PropertyMap());

  // Run main browser window loop.
  windowLoop(*styled_node);

  // Delete styled node and clear font registry.
  styled_node.reset();
  registry->clear();
  return 0;
}
```

æ¬¡ã®ã¨ãŠã‚Šã€ã“ã‚Œã¾ã§å­¦ã‚“ã§ããŸãƒ¡ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼ã¨ã€C++ãŒã¨ã¦ã‚‚ä¼¼ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚

1. HTMLã¨CSSã‚’ãƒ‘ãƒ¼ã‚¹

```c
// Parse HTML and CSS files.
const std::string source = io::readFile(FLAGS_html_file);
std::unique_ptr<dom::Node> root = html_parser::parseHtml(source);
const std::string css = io::readFile(FLAGS_css_file);
const std::unique_ptr<css::StyleSheet const> stylesheet = css::parseCss(css);
```

2. 1ã®çµæœã‹ã‚‰Style tree(Render tree)ã‚’æ§‹ç¯‰

```c
// Align styles with DOM nodes.
std::unique_ptr<style::StyledNode> styled_node =
    style::styleTree(*root, stylesheet, style::PropertyMap());
```

3. 2ã®çµæœã‹ã‚‰Layout treeã‚’æ§‹ç¯‰

```c
// Create layout tree for the specified viewport dimensions.
std::unique_ptr<layout::LayoutElement> layout_root =
    layout::layout_tree(sn, viewport);
```

4. 3ã‚’paintã¨ã„ã†æç”»

```c
// Paint to window.
paint(*layout_root, viewport.content, window);
```

# Re: ãƒ–ãƒ©ã‚¦ã‚¶ã®ä»•çµ„ã¿è³‡æ–™ã‚’èª­ã‚€

ã‚‚ã†ä¸€åº¦ã€[ãƒ–ãƒ©ã‚¦ã‚¶ã®ä»•çµ„ã¿: æœ€æ–°ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ã®å†…éƒ¨æ§‹é€ ](https://www.html5rocks.com/ja/tutorials/internals/howbrowserswork/) ã‚’èª­ã‚€ã¨ã€åˆã‚ã¦èª­ã‚“ã ã¨ãã«æ¯”ã¹ã¦ã€æ·±ãç†è§£ã§ãã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚

# æœ€å¾Œã«

ãƒ–ãƒ©ã‚¦ã‚¶ã®å‹•ä½œã«ã¤ã„ã¦è³‡æ–™ã‚„è‡ªä½œã‚’é€šã—ã¦ç†è§£ã‚’æ·±ã‚ã¾ã—ãŸã€‚

ãƒ–ãƒ©ã‚¦ã‚¶ã®å‹•ä½œãŒåˆ†ã‹ã‚Œã°ã€ãƒ–ãƒ©ã‚¦ã‚¶ã«å„ªã—ã„Webãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºãŒã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

(ä»Šåº¦ã“ãChromiumã®ãƒªãƒãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãŒã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚)

# ãã®ä»–

Chromiumã®ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãŒã‚ã‚Šã¾ã—ãŸã€‚å‚è€ƒã¾ã§ã«ã–ã£ã¨è¦‹ã¦ã¿ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚
[Chromium Browser Advent Calendar 2017](https://qiita.com/advent-calendar/2017/chromium)