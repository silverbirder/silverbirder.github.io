1:"$Sreact.fragment"
2:I[36926,["/_next/static/chunks/5af7d63d3817c0ad.js","/_next/static/chunks/2135796b958376e0.js","/_next/static/chunks/f06f97cc5d67ef22.js"],"PostArticle"]
6:I[85089,["/_next/static/chunks/ac58007543a7ba41.js","/_next/static/chunks/10f1e981bebff83b.js"],"OutletBoundary"]
7:"$Sreact.suspense"
3:T4439,"use strict";
const {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];
const {useMDXComponents: _provideComponents} = arguments[0];
function _createMdxContent(props) {
  const _components = {
    a: "a",
    h2: "h2",
    li: "li",
    ol: "ol",
    p: "p",
    ul: "ul",
    ..._provideComponents(),
    ...props.components
  };
  return _jsxs(_Fragment, {
    children: [_jsx(_components.h2, {
      id: "ストーリー",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#ストーリー",
        children: "ストーリー"
      })
    }), "\n", _jsxs(_components.ol, {
      children: ["\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_01/",
          children: "一足遅れて Kubernetes を学び始める - 01. 環境選択編 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_02/",
          children: "一足遅れて Kubernetes を学び始める - 02. Docker For Mac -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_03/",
          children: "一足遅れて Kubernetes を学び始める - 03. Raspberry Pi -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_04/",
          children: "一足遅れて Kubernetes を学び始める - 04. kubectl -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_05/",
          children: "一足遅れて Kubernetes を学び始める - 05. workloads その 1 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_06/",
          children: "一足遅れて Kubernetes を学び始める - 06. workloads その 2 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_07/",
          children: "一足遅れて Kubernetes を学び始める - 07. workloads その 3 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_08/",
          children: "一足遅れて Kubernetes を学び始める - 08. discovery&LB その 1 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_09/",
          children: "一足遅れて Kubernetes を学び始める - 09. discovery&LB その 2 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_10/",
          children: "一足遅れて Kubernetes を学び始める - 10. config&storage その 1 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_11/",
          children: "一足遅れて Kubernetes を学び始める - 11. config&storage その 2 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_12/",
          children: "一足遅れて Kubernetes を学び始める - 12. リソース制限 -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_13/",
          children: "一足遅れて Kubernetes を学び始める - 13. ヘルスチェックとコンテナライフサイクル -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_14/",
          children: "一足遅れて Kubernetes を学び始める - 14. スケジューリング -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_15/",
          children: "一足遅れて Kubernetes を学び始める - 15. セキュリティ -"
        })
      }), "\n", _jsx(_components.li, {
        children: _jsx(_components.a, {
          href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_16/",
          children: "一足遅れて Kubernetes を学び始める - 16. コンポーネント -"
        })
      }), "\n"]
    }), "\n", _jsx(_components.h2, {
      id: "前回",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#前回",
        children: "前回"
      })
    }), "\n", _jsxs(_components.p, {
      children: [_jsx(_components.a, {
        href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_10/",
        children: "一足遅れて Kubernetes を学び始める - 10. config&storage その 1 -"
      }), "では、config について学習しました。\n今回は、storage を学びます。"]
    }), "\n", _jsx(_components.h2, {
      id: "volume-と-presistentvolume",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#volume-と-presistentvolume",
        children: "Volume と PresistentVolume"
      })
    }), "\n", _jsx(_components.p, {
      children: "Volume は、あらかじめ決められた利用可能なボリュームを指します。こちらは、ボリュームの削除や新規作成ができません。\nPresistentVolume は、外部にある永続ボリュームを指します。こちらは、ボリュームの削除や新規作成ができます。\nDB のようなステートフルなものは PresistentVolume を使います。\n一時的なものなら、Volume を使うのですかね？"
    }), "\n", _jsx(_components.p, {
      children: "※ PresistentVolumeClaim は、PresistentVolume をアサインするためのリソース。"
    }), "\n", _jsx(_components.h2, {
      id: "volume-の種類",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#volume-の種類",
        children: "Volume の種類"
      })
    }), "\n", _jsx(_components.p, {
      children: "書籍（kubernetes 完全ガイド）で紹介されていた Volume の種類は、下記のとおりです。"
    }), "\n", _jsxs(_components.ul, {
      children: ["\n", _jsxs(_components.li, {
        children: ["emptyDir\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "一時的なディスク領域を利用"
          }), "\n", _jsx(_components.li, {
            children: "pod 削除されると、emptyDir も削除"
          }), "\n", _jsx(_components.li, {
            children: "マウント先を指定できない"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["hostPath\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "emptyDir のマウント先を指定できる版"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["downwardAPI\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "Pod の情報をファイルとして配置したファイルをマウント"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["projected\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "secret/configMap/downwardAPI/serviceAccountToken を１つにまとめたディレクトを作成し、マウント"
          }), "\n"]
        }), "\n"]
      }), "\n"]
    }), "\n", _jsxs(_components.p, {
      children: ["※ ", _jsx(_components.a, {
        href: "https://kubernetes.io/docs/concepts/storage/volumes/#types-of-volumes",
        children: "types-of-volumes"
      })]
    }), "\n", _jsx(_components.p, {
      children: "Volume を残すことができないので、Pod を削除する際は気をつけないとダメですね。\nログをファイルとして保存するなら、一時的に Volume が良いのですかね。\nただ、定期的に外部ストレージに移さないといけないですので、手間です。\n（そもそも、ログはストリームにして外部サービスに流すのがベスト）"
    }), "\n", _jsx(_components.p, {
      children: "プロダクトとしては、あんまり使い道ない...?"
    }), "\n", _jsx(_components.h2, {
      id: "presistentvolume-の種類",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#presistentvolume-の種類",
        children: "PresistentVolume の種類"
      })
    }), "\n", _jsx(_components.p, {
      children: "外部の永続ボリュームを利用します。例えば、下記の種類があります。"
    }), "\n", _jsxs(_components.ul, {
      children: ["\n", _jsx(_components.li, {
        children: "GCE Persistent Disk"
      }), "\n", _jsx(_components.li, {
        children: "AWS Elastic Block Store"
      }), "\n", _jsx(_components.li, {
        children: "NFS"
      }), "\n", _jsx(_components.li, {
        children: "iSCSI"
      }), "\n", _jsx(_components.li, {
        children: "Ceph"
      }), "\n", _jsx(_components.li, {
        children: "OpenStack Cinder"
      }), "\n", _jsx(_components.li, {
        children: "GlusterFS"
      }), "\n"]
    }), "\n", _jsxs(_components.p, {
      children: [_jsx(_components.a, {
        href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_06/",
        children: "一足遅れて Kubernetes を学び始める - 06. workloads その 2 -"
      }), "では、NFS を使いましたね。\nPersistentVolume の作成方法は、外部の永続ボリュームによって違うのですが、共通して言えるところもあるみたいなので、\nそこを書いてみます。"]
    }), "\n", _jsxs(_components.ul, {
      children: ["\n", _jsxs(_components.li, {
        children: ["ラベル\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "PersistentVolume をラベリングすることで、指定しやすくする"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["容量\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "Volume で要求する容量。最も小さい容量からアサインされる。"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["アクセスモード\n", _jsxs(_components.ul, {
          children: ["\n", _jsxs(_components.li, {
            children: ["ReadWriteOnce\n", _jsxs(_components.ul, {
              children: ["\n", _jsx(_components.li, {
                children: "単一ノードから Read/Write が可能"
              }), "\n"]
            }), "\n"]
          }), "\n", _jsxs(_components.li, {
            children: ["ReadOnlyMany\n", _jsxs(_components.ul, {
              children: ["\n", _jsx(_components.li, {
                children: "複数ノードから Read が可能"
              }), "\n"]
            }), "\n"]
          }), "\n", _jsxs(_components.li, {
            children: ["ReadWriteMany\n", _jsxs(_components.ul, {
              children: ["\n", _jsx(_components.li, {
                children: "複数ノードから Read/Write が可能"
              }), "\n"]
            }), "\n"]
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["Reclaim Policy\n", _jsxs(_components.ul, {
          children: ["\n", _jsxs(_components.li, {
            children: ["Volume を使い終わったあと、破棄するか再利用するかのポリシー\n", _jsxs(_components.ul, {
              children: ["\n", _jsxs(_components.li, {
                children: ["Delete\n", _jsxs(_components.ul, {
                  children: ["\n", _jsx(_components.li, {
                    children: "PersistentVolume の実体を削除"
                  }), "\n"]
                }), "\n"]
              }), "\n", _jsxs(_components.li, {
                children: ["Retain\n", _jsxs(_components.ul, {
                  children: ["\n", _jsx(_components.li, {
                    children: "PersistentVolume の実体を残さず保持"
                  }), "\n", _jsx(_components.li, {
                    children: "再度マウントされない"
                  }), "\n"]
                }), "\n"]
              }), "\n", _jsxs(_components.li, {
                children: ["Recycle\n", _jsxs(_components.ul, {
                  children: ["\n", _jsx(_components.li, {
                    children: "PersistentVolume のデータを削除し、再利用可能にする"
                  }), "\n", _jsx(_components.li, {
                    children: "再度マウントされる"
                  }), "\n", _jsx(_components.li, {
                    children: "（廃止予定で、DynamicProvisioning を利用すること)"
                  }), "\n"]
                }), "\n"]
              }), "\n"]
            }), "\n"]
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["StorageClass\n", _jsxs(_components.ul, {
          children: ["\n", _jsxs(_components.li, {
            children: ["各プロバイザーが提供するストレージの型\n", _jsxs(_components.ul, {
              children: ["\n", _jsx(_components.li, {
                children: "基本的に自動作成されている"
              }), "\n"]
            }), "\n"]
          }), "\n"]
        }), "\n"]
      }), "\n"]
    }), "\n", _jsx(_components.h2, {
      id: "persistentvolumeclaim",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#persistentvolumeclaim",
        children: "PersistentVolumeClaim"
      })
    }), "\n", _jsx(_components.p, {
      children: "実際に、PresistentVolume を使うためには、PresistentVolumeClaim で要求を出す必要があります。\n必要な項目は、下記です。"
    }), "\n", _jsxs(_components.ul, {
      children: ["\n", _jsxs(_components.li, {
        children: ["ラベルセレクタ\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "ラベルでフィルタリング"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["容量\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "求めている容量"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["アクセスモード\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "PresistentVolume のアクセスモードを参照"
          }), "\n"]
        }), "\n"]
      }), "\n", _jsxs(_components.li, {
        children: ["StorageClass\n", _jsxs(_components.ul, {
          children: ["\n", _jsx(_components.li, {
            children: "PresistentVolume の StorageClass を参照"
          }), "\n"]
        }), "\n"]
      }), "\n"]
    }), "\n", _jsx(_components.p, {
      children: "要求を満たした Volume が RetainPolicy だった場合、Claim を削除した時点で「Released」になります。"
    }), "\n", _jsx(_components.h2, {
      id: "最後に",
      children: _jsx(_components.a, {
        className: "mdx-heading-anchor",
        href: "#最後に",
        children: "最後に"
      })
    }), "\n", _jsxs(_components.p, {
      children: ["今回は、書籍をそのまま書いた感じになりました。\n実際に試したのは、", _jsx(_components.a, {
        href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_06/",
        children: "一足遅れて Kubernetes を学び始める - 06. workloads その 2 -"
      }), "です。\nまあ、あんまり深くはハマらない方が良いのではと思いました。\n次回は、", _jsx(_components.a, {
        href: "https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_12/",
        children: "こちら"
      }), "です。"]
    })]
  });
}
function MDXContent(props = {}) {
  const {wrapper: MDXLayout} = {
    ..._provideComponents(),
    ...props.components
  };
  return MDXLayout ? _jsx(MDXLayout, {
    ...props,
    children: _jsx(_createMdxContent, {
      ...props
    })
  }) : _createMdxContent(props);
}
return {
  default: MDXContent
};
0:{"buildId":"FFhISK9OdISz_FCZdFfxR","rsc":["$","$1","c",{"children":[["$","$L2",null,{"compiledSource":"$3","followLinks":{"bluesky":"https://bsky.app/profile/silverbirder.bsky.social","github":"https://github.com/silverbirder","rss":"https://silverbirder.github.io/rss.xml","threads":"https://www.threads.com/@silverbirder","x":"https://x.com/silverbirder"},"meta":{"postNumber":18,"publishedAt":"2019-05-27","tags":["クラウドインフラ"],"title":"一足遅れて Kubernetes を学び始める - 11. config&storage その2 -"},"navigation":{"next":{"href":"/blog/contents/start_the_learning_kubernetes_12","publishedAt":"2019-05-29","title":"一足遅れて Kubernetes を学び始める - 12. リソース制限 -"},"prev":{"href":"/blog/contents/start_the_learning_kubernetes_10","publishedAt":"2019-05-23","title":"一足遅れて Kubernetes を学び始める - 10. config&storage その1 -"}},"relatedPosts":[{"posts":[{"publishedAt":"2024-03-29","slug":"try-container-structure-test","summary":"Dockerイメージ内の構造や設定が期待通りかどうかを検証する `container-structure-test` を知りました。container-structure-test GitHub リポジトリ。せっかくなので、試してみました。","tags":["テスト","クラウドインフラ"],"title":"Docker Image に 構造化テスト container-structure-test を試してみた"},{"publishedAt":"2021-11-26","slug":"a_mockable_unit_testing_method_that_can_be_completed_only_with_big_query","summary":"BigQuery、皆さん使っていますか？ 私は、業務でBigQueryを使ったデータ構築をしています。品質担保のため、BigQueryのSQLに対してテストをしたいと考えています。本記事では、BigQueryだけで完結し、かつ、Mockデータを差し替え可能なユニットテスト手法について、紹介します。","tags":["フロントエンド","クラウドインフラ","テスト"],"title":"BigQueryだけで完結するモック可能なユニットテスト手法"},{"publishedAt":"2021-08-28","slug":"learn_point_from_building_tiktok_scrape_platform_on_gcp","summary":"TikTokへスクレイプするバッチをGCP上で構築しました。GCP構築のシステム設計話と、その構築時に、ハマったことを共有します。","tags":["サービス","クラウドインフラ","成果物","クローリング"],"title":"TikTokスクレイプ基盤をGCP上で構築してハマったこと"}],"tag":"クラウドインフラ"}],"shareUrl":"https://silverbirder.github.io/blog/contents/start_the_learning_kubernetes_11/","slug":"start_the_learning_kubernetes_11"}],["$L4"],"$L5"]}],"loading":null,"isPartial":false}
4:["$","script","script-0",{"src":"/_next/static/chunks/f06f97cc5d67ef22.js","async":true}]
5:["$","$L6",null,{"children":["$","$7",null,{"name":"Next.MetadataOutlet","children":"$@8"}]}]
8:null
