---
title: 'Tauri でつくる自分用 VLog アプリ開発記'
publishedAt: '2025-10-04'
summary: '最近、Tauri で自分用の VLog アプリを作ったので、何を考えて開発し、どこでつまずき、どうやって乗り越えたのかを振り返ります。ソースコードは GitHub に公開しています。'
tags: ["Artifact"]
---

最近、Tauri で自分用の VLog アプリを作ったので、何を考えて開発し、どこでつまずき、どうやって乗り越えたのかを振り返ります。
ソースコードは GitHub に公開しています。

https://github.com/silverbirder/vlog

対象のプラットフォームは、Mac のデスクトップに限っています。
署名付きではないのですが、上記ページにて、dmg を配布しています。

## 背景

YouTube や TikTok で、日常を短い動画で残す VLog というものがあるようです。
私自身、ブログの記事や Google マップのタイムライン、Google フォトのアルバムを使って、過去を遡って眺める時間が好きです。
「動画でも記録しておけたら面白そうだな」と感じていました。

日々の生活で一番長く過ごしている場所は自宅です。
パソコンに向かって作業している時間も多いです。
だったら、**Mac の画面と自分の姿を同時に録画できるデスクトップアプリを自分で作ろう** と決めました。

## 技術選定の迷いと Tauri 採用

当初は経験のある Electron を選ぶつもりでした。
しかし、公式の React テンプレートが用意されていなかったり、Electron Fiddle がうまく動かなかったり、
`npm install electron` がなぜか通らなかったりと、序盤から段差の多い道のりに遭遇しました。
過去にも似た悩みを抱えた記憶がよみがえり、Electron で進むモチベーションが下がってしまいました。

そこで思い出したのが、以前メジャーアップデートのニュースで見かけた Tauri です。
モバイル対応は考えていなかったものの、デスクトップアプリを作れるし、React テンプレートもありました。
クイックスタートをなぞっただけで、数分ほどで開発環境が立ち上がり、`.dmg` のビルドまで到達できました。
「これなら作り切れそうだ」と確信して、Tauri に乗り換えました。

## 動画保存まわりの試行錯誤

録画には Web APIの `MediaDevices.getDisplayMedia()` と `MediaDevices.getUserMedia()` を使いました。
前者が画面キャプチャ、後者がカメラ映像の取得です。

得られた映像チャンクをフロントエンドで一旦保持してから録画を終了したら、Rust 側へ送る構成で組み上げました。
保存されるのは、スクリーン録画(mp4)、カメラ映像(mp4)、マイク音声(m4a)の3つのファイルです。
AI Agent に下書きしてもらったコードがそのまま動いたので、ひとまず録画開始してみました。
出来上がった動画を見ると、冒頭の数分だけが動いていて、その後は静止画という残念な結果になりました。
フロントエンドでチャンクを処理しきれず詰まってしまったのだろうと判断しました。

そこで、Rust 側で直接キャプチャする方法を調べました。
OS ネイティブ API を触る必要があり、理解コストが重そうだったので断念しました。
代わりに、**フロントエンドでチャンクを抱え込まず、取得したデータをそのまま Rust 側へ渡し、そのままファイルへ追記する**方式に切り替えました。
結果、録画が途中で止まる問題は解消し、録画を止めるだけで保存処理が完了するようになりました。

## 欲しかった機能を揃える

使い続けると、以下のような要望が出てきました。

- 「一定時間で自動停止したい」
  - ずっと録画ではなく、15 分や30 分で区切りたい
- 「停止を気づける通知が欲しい」
  - 録画中は集中していて、つい忘れてしまう
  - 自動停止すると、停止していることに気づかない
- 「カメラやマイクを切り替えたい」
  - Mac に複数のカメラやマイクを接続している場合に、選びたい
- 「停止後にすぐ再開したい」
  - 毎回、録画を停止してから開始するのが面倒

これらを地道に実装し、特に聴くことがなかったマイク録音は潔く削除しました。
余計な機能を残さないことで、アプリ全体の体験がすっきりした感覚があります。

## PiP をどう実現したか

スクリーンとカメラの映像が別々に保存される構成だと、「動画を見返すときに視線が忙しいな」と感じました。
ピクチャ・イン・ピクチャ (PiP) でまとめて録画したくなりました。

まずはフロントエンドでスクリーンとカメラの映像を合成して保存するアプローチを試しましたが、処理が重くて FPS が落ち、カクつきが目立って断念しました。
スクリーンとカメラ映像はそのまま保存して、後処理で ffmpeg による合成も検討したものの、15 分の動画でもffmpegの処理時間が長く、運用する気になれませんでした。

最終的にたどり着いたのは、**録画中にカメラ映像を常に前面表示しておき、スクリーン録画に写し込む**というシンプルな方法です。
これならリアルタイム合成も後処理も不要で、狙い通りの PiP 動画が撮れました。
唯一の課題は、VS Code などをフルスクリーン表示にしていると PiP ウィンドウを最前面に出せない点です。
今はフルスクリーンを控えることで運用しています。

## おわりに

React って `Learn Once, Write Anywhere` という謳い文句がありますが、
Tauri でもReactの知識でデスクトップアプリが作れるのは本当にありがたかったです。
今回は、Tauri のRust側の実装は最低限に留めていました。Rustの実装に夢中になると、さらに時間がかかってしまいそうだったからです。

Tauri を使えば、デスクトップやモバイル、Webのいずれのプラットフォームを、Reactの知識で開発できます。
ひと昔前では、ElectronやReact Native, React Native For Web など、色々と組み合わせていましたが、Tauri なら一つにまとまります。
今後も Tauri を使って、色々なアプリを作っていきたいなと思いました。
